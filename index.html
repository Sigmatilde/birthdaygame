<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Boss' Birthday Game</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background: #fff0fb;
      margin: 0;
      padding: 20px;
    }

    #game-container {
      display: none;
    }

    .question {
      font-size: 24px;
      font-weight: bold;
      margin: 20px auto 10px auto;
      padding: 20px;
      background: linear-gradient(145deg, #f9ccff, #ff7edd);
      color: #5a005a;
      width: 60%;
      border-radius: 30px;
    }

    .question-img {
      width: 300px;
      max-width: 80%;
      border-radius: 20px;
      margin: 10px auto;
    }

    .answer-button, .main-button {
      display: inline-block;
      width: 160px;
      margin: 10px;
      padding: 15px 20px;
      background: linear-gradient(145deg, #f7baff, #f472d0);
      color: #4d004d;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .answer-button:hover, .main-button:hover {
      transform: scale(1.05);
    }

    .feedback {
      font-size: 20px;
      font-weight: bold;
      margin-top: 15px;
      color: #5a005a;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    ol {
      text-align: left;
      display: inline-block;
    }
  </style>
</head>
<body>

<h1>üéâ Boss' Birthday Celebration üéâ</h1>
<div id="main-buttons">
  <button class="main-button" onclick="startTrivia()">Play Trivia</button>
  <a href="https://app.gather.town/invite?token=gtO21pgXTu2GSVgYHaoi" target="_blank">
    <button class="main-button">Explore the City üèôÔ∏è</button>
  </a>
</div>

<div id="game-container"></div>

<script>
const triviaData = [
  {
    question: "Quanto alza di bench Roberto",
    choices: ["30kg", "60kg", "100kg", "110kg"],
    answer: "110kg",
    image: "images/roberto_small.png"
  },
  {
    question: "Cosa ha ricevuto la zia per Natale?",
    choices: ["Un vibratore", "Un cappello per la cervicale", "un braccialetto di pelle umana", "non lo so"],
    answer: "Un cappello per la cervicale",
    image: "images/zia_hat.png"
  },
  {
    question: "Cosa ha gridato Larissa dopo due giorni con Giuseppe e Raquel?",
    choices: ["AAAAAAAAH GIUSEPPE E' TROPPO FORTE", "AAAAAAAAH GIUSEPPE E' NUDO", "AAAAAAAAH RAQUEL PUZZA", "AAAAAAAAH TIZI RALLENTA"],
    answer: "AAAAAAAAH GIUSEPPE E' NUDO",
    image: "images/larissa.png"
  },
  {
    question: "Quale paese produce il miglior olio d'oliva?",
    choices: ["Italia", "Spagna", "Quello Spagnolo Fa Schifo", "Chiedete a Raquel"],
    answer: "Italia",
    image: "./italy.png"
  },
  {
    question: "Where did Eva go to college?",
    choices: ["Harvard", "MIT", "Stanford", "Oxford"],
    answer: "Stanford",
    image: "images/eva_college.png"
  },
  {
    question: "What is Frank's hobby?",
    choices: ["Cooking", "Gaming", "Dancing", "Photography"],
    answer: "Gaming",
    image: "images/frank_hobby.png"
  }
];

let triviaPlayer = "";
let allScores = JSON.parse(localStorage.getItem("triviaScores") || "[]");

function startTrivia() {
  document.getElementById("main-buttons").style.display = "none";
  triviaPlayer = prompt("Enter your name:");
  if (!triviaPlayer) return;

  const container = document.getElementById("game-container");
  container.innerHTML = "";
  container.style.display = "block";

  const questions = [...triviaData].sort(() => 0.5 - Math.random()).slice(0, 6);
  let current = 0;
  let score = 0;

  function showQuestion() {
    container.innerHTML = "";
    const questionImg = document.createElement("img");
    questionImg.src = questions[current].image;
    questionImg.alt = "Question Image";
    questionImg.className = "question-img";

    const questionText = document.createElement("div");
    questionText.className = "question";
    questionText.textContent = questions[current].question;

    const answersDiv = document.createElement("div");
    const feedbackDiv = document.createElement("div");
    feedbackDiv.className = "feedback";

    container.appendChild(questionImg);
    container.appendChild(questionText);
    container.appendChild(answersDiv);
    container.appendChild(feedbackDiv);

    questions[current].choices.forEach(choice => {
      const btn = document.createElement("button");
      btn.className = "answer-button";
      btn.textContent = choice;
      btn.onclick = () => {
        const correct = choice === questions[current].answer;
        feedbackDiv.textContent = correct ? "Correct! üéâ" : "Wrong! ‚ùå";
        if (correct) score++;
        Array.from(answersDiv.children).forEach(b => b.disabled = true);
        setTimeout(() => {
          current++;
          if (current < questions.length) showQuestion();
          else showScore();
        }, 1000);
      };
      answersDiv.appendChild(btn);
    });
  }

  function showScore() {
    allScores.push({ name: triviaPlayer, score: score });
    localStorage.setItem("triviaScores", JSON.stringify(allScores));

    container.innerHTML = `<h2>${triviaPlayer}, your score: ${score}/6</h2><h3>Leaderboard:</h3>`;

    const list = document.createElement("ol");
    allScores.sort((a, b) => b.score - a.score).forEach(entry => {
      const item = document.createElement("li");
      item.textContent = `${entry.name}: ${entry.score}`;
      list.appendChild(item);
    });
    container.appendChild(list);

    const retry = document.createElement("button");
    retry.textContent = "Play Again";
    retry.className = "answer-button";
    retry.onclick = startTrivia;
    container.appendChild(retry);
  }

  showQuestion();
}
</script>

</body>
</html>
